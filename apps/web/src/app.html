<!DOCTYPE html>
<html lang="%sveltekit.lang%">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="%sveltekit.assets%/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="robots" content="index, follow" />
		
		<!-- PWA Manifest -->
		<link rel="manifest" href="%sveltekit.assets%/manifest.json" />
		
		<!-- Performance optimizations -->
		<link rel="dns-prefetch" href="https://fonts.gstatic.com">
		<link rel="dns-prefetch" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://supabase.co" crossorigin>
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		
		<!-- Preload critical fonts -->
		<link rel="preload" as="font" type="font/woff2" href="%sveltekit.assets%/fonts/inter-var.woff2" crossorigin>
		
		<!-- Resource hints for better Core Web Vitals -->
		<meta name="theme-color" content="#3b82f6">
		<meta name="msapplication-TileColor" content="#3b82f6">
		
		<!-- Apple Touch Icons -->
		<link rel="apple-touch-icon" href="%sveltekit.assets%/icons/icon-192x192.png">
		
		<!-- Error handling and monitoring -->
		<script>
			// Global error handler for uncaught JavaScript errors
			window.addEventListener('error', function(event) {
				console.error('Global error:', event.error);
				// In production, send to error tracking service
				if (window.location.hostname !== 'localhost') {
					// Could integrate with Sentry, LogRocket, etc.
				}
			});

			// Global handler for unhandled promise rejections
			window.addEventListener('unhandledrejection', function(event) {
				console.error('Unhandled promise rejection:', event.reason);
			});

			// Report Core Web Vitals to analytics (dev only)
			if ('PerformanceObserver' in window && window.location.hostname === 'localhost') {
				try {
					// LCP reporting
					new PerformanceObserver((list) => {
						const entries = list.getEntries();
						const lastEntry = entries[entries.length - 1];
						console.log('[LCP]', lastEntry.renderTime || lastEntry.loadTime);
					}).observe({ type: 'largest-contentful-paint', buffered: true });
					
					// FID reporting
					new PerformanceObserver((list) => {
						const entries = list.getEntries();
						const firstInput = entries[0];
						console.log('[FID]', firstInput.processingStart - firstInput.startTime);
					}).observe({ type: 'first-input', buffered: true });
				} catch (e) {
					// Silently fail if not supported
				}
			}
		</script>
		
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover" data-sveltekit-preload-code="viewport">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>

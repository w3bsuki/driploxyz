
> web@1.0.2 check-types K:\driplo-turbo-1\apps\web
> tsc --noEmit

src/lib/services/products.ts(606,89): error TS2345: Argument of type '(item: ProductWithJoinedData) => { id: string; title: string; description: string; price: number; condition: "brand_new_with_tags" | "new_without_tags" | "like_new" | "good" | "worn" | "fair"; ... 49 more ...; seller_rating: number | undefined; }' is not assignable to parameter of type '(value: { id: string; title: string; price: number; condition: "brand_new_with_tags" | "new_without_tags" | "like_new" | "good" | "worn" | "fair"; size: string | null; brand: string | null; ... 10 more ...; categories: { ...; }; }, index: number, array: { ...; }[]) => { ...; }'.
  Types of parameters 'item' and 'value' are incompatible.
    Type '{ id: string; title: string; price: number; condition: "brand_new_with_tags" | "new_without_tags" | "like_new" | "good" | "worn" | "fair"; size: string | null; brand: string | null; ... 10 more ...; categories: { ...; }; }' is missing the following properties from type 'ProductWithJoinedData': archived_at, auto_archive_after_days, boost_history_id, boost_priority, and 32 more.
src/lib/services/stripe.ts(591,74): error TS2339: Property 'current_period_start' does not exist on type 'Subscription'.
src/lib/services/stripe.ts(592,72): error TS2339: Property 'current_period_end' does not exist on type 'Subscription'.
src/lib/services/stripe.ts(624,34): error TS2339: Property 'subscription' does not exist on type 'Invoice'.
src/lib/stores/orderSubscription.svelte.ts(58,7): error TS2769: No overload matches this call.
  The last overload gave the following error.
    Argument of type '"postgres_changes"' is not assignable to parameter of type '"system"'.
src/lib/stores/orderSubscription.svelte.ts(78,7): error TS2769: No overload matches this call.
  The last overload gave the following error.
    Argument of type '"postgres_changes"' is not assignable to parameter of type '"system"'.
src/routes/(protected)/checkout/[productId]/+page.ts(73,5): error TS2353: Object literal may only specify known properties, and 'featured_at' does not exist in type 'Product'.
src/routes/(protected)/favorites/+page.server.ts(50,62): error TS2345: Argument of type '(img: ProductImage) => string' is not assignable to parameter of type '(value: { id: string; image_url: string; alt_text: string | null; sort_order: number | null; }, index: number, array: { id: string; image_url: string; alt_text: string | null; sort_order: number | null; }[]) => string'.
  Types of parameters 'img' and 'value' are incompatible.
    Type '{ id: string; image_url: string; alt_text: string | null; sort_order: number | null; }' is missing the following properties from type '{ alt_text: string | null; created_at: string | null; display_order: number | null; id: string; image_url: string; product_id: string; sort_order: number | null; }': created_at, display_order, product_id
src/routes/(protected)/messages/+page.server.ts(70,50): error TS2345: Argument of type '"get_conversation_messages"' is not assignable to parameter of type '"approve_drip_product" | "audit_rls_coverage" | "audit_rls_status" | "boost_product" | "calculate_seller_trending" | "can_message_about_product" | "check_rate_limit" | ... 41 more ... | "validate_discount_code"'.
src/routes/(protected)/messages/+page.server.ts(78,7): error TS2322: Type '{ id: string; sender_id: string; receiver_id: string; product_id: string | null; order_id: string | null; content: string; created_at: string; is_read: boolean; status: "sent" | "delivered" | "read" | "sending" | undefined; ... 5 more ...; order: { ...; } | null; }[]' is not assignable to type 'Message[]'.
  Type '{ id: string; sender_id: string; receiver_id: string; product_id: string | null; order_id: string | null; content: string; created_at: string; is_read: boolean; status: "sent" | "delivered" | "read" | "sending" | undefined; ... 5 more ...; order: { ...; } | null; }' is not assignable to type 'Message'.
    Types of property 'sender' are incompatible.
      Type '{ username: string; avatar_url?: string | undefined; } | null' is not assignable to type 'UserInfo | undefined'.
        Type 'null' is not assignable to type 'UserInfo | undefined'.
src/routes/(protected)/messages/+page.server.ts(78,67): error TS2345: Argument of type '(msg: MessageRpcResult) => { id: string; sender_id: string; receiver_id: string; product_id: string | null; order_id: string | null; content: string; created_at: string; is_read: boolean; ... 6 more ...; order: { ...; } | null; }' is not assignable to parameter of type '((value: { has_delete_policy: boolean; has_insert_policy: boolean; has_select_policy: boolean; has_update_policy: boolean; policy_count: number; rls_enabled: boolean; table_name: string; }, index: number, array: { ...; }[]) => { ...; }) & ... 11 more ... & ((value: Json, index: number, array: Json[]) => { ...; })'.
  Type '(msg: MessageRpcResult) => { id: string; sender_id: string; receiver_id: string; product_id: string | null; order_id: string | null; content: string; created_at: string; is_read: boolean; ... 6 more ...; order: { ...; } | null; }' is not assignable to type '(value: { has_delete_policy: boolean; has_insert_policy: boolean; has_select_policy: boolean; has_update_policy: boolean; policy_count: number; rls_enabled: boolean; table_name: string; }, index: number, array: { ...; }[]) => { ...; }'.
    Types of parameters 'msg' and 'value' are incompatible.
      Type '{ has_delete_policy: boolean; has_insert_policy: boolean; has_select_policy: boolean; has_update_policy: boolean; policy_count: number; rls_enabled: boolean; table_name: string; }' is missing the following properties from type 'MessageRpcResult': id, sender_id, receiver_id, product_id, and 8 more.
src/routes/(protected)/messages/+page.server.ts(100,48): error TS2345: Argument of type '"get_user_conversations"' is not assignable to parameter of type '"approve_drip_product" | "audit_rls_coverage" | "audit_rls_status" | "boost_product" | "calculate_seller_trending" | "can_message_about_product" | "check_rate_limit" | ... 41 more ... | "validate_discount_code"'.
src/routes/(protected)/messages/+page.server.ts(106,60): error TS2345: Argument of type '(conv: ConversationRpcResult) => { id: string; userId: string; userName: string; userAvatar: string | null; lastActiveAt: string | null; productId: string | null; productTitle: string | null; ... 10 more ...; isOrderConversation: boolean; }' is not assignable to parameter of type '((value: Json, index: number, array: Json[]) => { id: string; userId: string; userName: string; userAvatar: string | null; lastActiveAt: string | null; productId: string | null; ... 11 more ...; isOrderConversation: boolean; }) & ... 15 more ... & ((value: { ...; }, index: number, array: { ...; }[]) => { ...; })'.
  Type '(conv: ConversationRpcResult) => { id: string; userId: string; userName: string; userAvatar: string | null; lastActiveAt: string | null; productId: string | null; productTitle: string | null; ... 10 more ...; isOrderConversation: boolean; }' is not assignable to type '(value: Json, index: number, array: Json[]) => { id: string; userId: string; userName: string; userAvatar: string | null; lastActiveAt: string | null; productId: string | null; ... 11 more ...; isOrderConversation: boolean; }'.
    Types of parameters 'conv' and 'value' are incompatible.
      Type 'Json' is not assignable to type 'ConversationRpcResult'.
        Type 'null' is not assignable to type 'ConversationRpcResult'.
src/routes/(protected)/messages/+page.server.ts(188,23): error TS2345: Argument of type '"mark_conversation_read"' is not assignable to parameter of type '"approve_drip_product" | "audit_rls_coverage" | "audit_rls_status" | "boost_product" | "calculate_seller_trending" | "can_message_about_product" | "check_rate_limit" | ... 41 more ... | "validate_discount_code"'.
K:\driplo-turbo-1\apps\web:
 ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  web@1.0.2 check-types: `tsc --noEmit`
Exit status 2
